---
## ЁЯТ╗ роЖрокрпНрокро░рпЗроЯрпНроЯро┐роЩрпН роЪро┐ро╕рпНроЯроорпН роорпЛроЯрпНроХро│рпН (OS Modes)

роЖрокрпНрокро░рпЗроЯрпНроЯро┐роЩрпН роЪро┐ро╕рпНроЯродрпНродро┐ро▓рпН, ро╡рпЗро▓рпИроХро│рпН роироЯроХрпНроХрпБроорпН ро╡ро┐родродрпНродрпИрокрпН рокрпКро▒рпБродрпНродрпБ, роЗро░рогрпНроЯрпБ роорпБроХрпНроХро┐ропрооро╛рой роорпЛроЯрпНроХро│рпН (Modes) роЗро░рпБроХрпНроХрпБ.

### 1. ропрпВроЪро░рпН роорпЛроЯрпН (User Mode)

| ро╡ро┐ро╖ропроорпН | ро╡ро┐ро│роХрпНроХроорпН (Explanation) | 
| :--- | :--- | 
| **ропро╛ро░рпБроХрпНроХро╛роХ?** | роиро╛роорпН рокропройрпНрокроЯрпБродрпНродрпБроорпН роЕрокрпНро│ро┐роХрпЗро╖ройрпНроХро│рпН (Google Chrome, PowerPoint, роХрпЗроорпНро╕рпН). |
| **роорпЛроЯрпН рокро┐роЯрпН (Mode Bit)** | **1** роОройроХрпН роХрпБро▒ро┐роХрпНроХрокрпНрокроЯрпБроорпН. |
| **роЪрпЖропро▓рпНрокро╛роЯрпБ** | роЗро╡рпИ **Preemptive** (роиро╛ройрпН-роЕроЯрпНроЯро╛рооро┐роХрпН) роорпБро▒рпИропро┐ро▓рпН роЗропроЩрпНроХрпБроорпН. роЕродро╛ро╡родрпБ, роорпБроХрпНроХро┐ропрооро╛рой ро╡рпЗро▓рпИ ро╡роирпНродро╛ро▓рпН, OS роЗроирпНрод роЕрокрпНро│ро┐роХрпЗро╖ройрпНроХро│рпИ ро╡ро▓рпБроХрпНроХроЯрпНроЯро╛ропрооро╛роХ роиро┐ро▒рпБродрпНродро┐ро╡ро┐роЯ роорпБроЯро┐ропрпБроорпН. |
| **роХрпБро▒ро┐рокрпНрокрпБ** | ропрпВроЪро░рпН роОро┤рпБродро┐роп рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпН (C рокрпБро░рпЛроХро┐ро░ро╛роорпН, ропрпВроЪро░рпН-роЯро┐роГрокрпИройрпНроЯрпБ роГрокроЩрпНро╖ройрпНроХро│рпН, Built-in роГрокроЩрпНро╖ройрпНроХро│рпН, `printf` рокрпЛройрпНро▒ ро▓рпИрокрпНро░ро░ро┐ роГрокроЩрпНро╖ройрпНроХро│рпН) роОро▓рпНро▓ро╛роорпЗ ропрпВроЪро░рпН роорпЛроЯро┐ро▓рпН родро╛ройрпН роЗропроЩрпНроХрпБроорпН. |
| **OS-ройрпН рокроХрпБродро┐ роЗро▓рпНро▓рпИропро╛?** | роХроорпНрокрпИро▓ро░рпНроХро│рпН (Compilers) роЖрокрпНрокро░рпЗроЯрпНроЯро┐роЩрпН роЪро┐ро╕рпНроЯродрпНродро┐ройрпН рокроХрпБродро┐ роЕро▓рпНро▓. роЕро╡рпИ роорпИроХрпНро░рпЛроЪро╛роГрокрпНроЯрпН роОроХрпНроЪрпЖро▓рпН рокрпЛройрпНро▒ роТро░рпБ ропрпВроЪро░рпН роЕрокрпНро│ро┐роХрпЗро╖ройрпН рокрпБро░рпЛроХро┐ро░ро╛роорпН родро╛ройрпН. |

### 2. роХро░рпНройро▓рпН роорпЛроЯрпН (Kernel Mode)

| ро╡ро┐ро╖ропроорпН | ро╡ро┐ро│роХрпНроХроорпН (Explanation) | 
| :--- | :--- | 
| **ропро╛ро░рпБроХрпНроХро╛роХ?** | роЖрокрпНрокро░рпЗроЯрпНроЯро┐роЩрпН роЪро┐ро╕рпНроЯродрпНродро┐ройрпН рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпН (OS program/routines) роЗроЩрпНроХрпЗродро╛ройрпН роЗро░рпБроХрпНроХрпБроорпН. |
| **роорпЛроЯрпН рокро┐роЯрпН (Mode Bit)** | **0** роОройроХрпН роХрпБро▒ро┐роХрпНроХрокрпНрокроЯрпБроорпН. |
| **роЪрпЖропро▓рпНрокро╛роЯрпБ** | роЗро╡рпИ **Non-preemptive** (роЕроЯрпНроЯро╛рооро┐роХрпН) роорпБро▒рпИропро┐ро▓рпН роЗропроЩрпНроХрпБроорпН. роЕродро╛ро╡родрпБ, CPU-ро╡ро┐ро▓ро┐ро░рпБроирпНродрпБ роЗроирпНрод рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпИ ро╡ро▓рпБроХрпНроХроЯрпНроЯро╛ропрооро╛роХ роирпАроХрпНроХ роорпБроЯро┐ропро╛родрпБ. |
| **роЕродро┐роХро╛ро░роорпН** | роЗро╡рпИ роЪро▓рпБроХрпИ рокрпЖро▒рпНро▒ (Privileged) рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпН. роЪро┐ро╕рпНроЯроорпН роХро╛ро▓рпНроХро│рпН (System Calls) роОройрокрпНрокроЯрпБроорпН OS роЪро░рпНро╡рпАро╕рпН рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпН роЗроЩрпНроХрпЗродро╛ройрпН роЗропроЩрпНроХрпБроорпН. |
| **рокро╛родрпБроХро╛рокрпНрокрпБ** | роОрокрпНрокрпЛродрпБроорпН ропрпВроЪро░рпН роЕрокрпНро│ро┐роХрпЗро╖ройрпНроХро│рпБроХрпНроХрпБ 'роЕроЯрпНрооро┐ройрпН ро░рпИроЯрпНро╕рпН' (Admin Rights) роХрпКроЯрпБроХрпНроХро╛рооро▓рпН роЗро░рпБроХрпНроХ, рокро╛родрпБроХро╛рокрпНрокрпБроХрпНроХро╛роХ роЗроирпНрод роорпЛроЯрпН рооро╛ро▒рпБродро▓рпН родрпЗро╡рпИ. |

---

## ЁЯФД роорпЛроЯрпН ро╖ро┐роГрокрпНроЯро┐роЩрпН: роОрокрпНрокроЯро┐ роироЯроХрпНроХрпБродрпБ? (Mode Shifting Implementation)

роЖрокрпНрокро░рпЗроЯрпНроЯро┐роЩрпН роЪро┐ро╕рпНроЯроорпН роОройрпНрокродрпБ роЪро░рпНро╡рпАро╕рпН роХрпКроЯрпБрокрпНрокро╡ро░рпН (Service Provider), ропрпВроЪро░рпН рокрпБро░рпЛроХро┐ро░ро╛роорпНроХро│рпН роЪро░рпНро╡рпАро╕рпН роХрпЗроЯрпНрокро╡ро░рпНроХро│рпН (Service User). ропрпВроЪро░рпН роЕрокрпНро│ро┐роХрпЗро╖ройрпБроХрпНроХрпБ роХрпВроЯрпБродро▓рпН роЪро▓рпБроХрпИроХро│рпН (Privileges) родрпЗро╡рпИрокрпНрокроЯрпБроорпНрокрпЛродрпБ, роорпЛроЯрпН **ропрпВроЪро░ро┐ро▓рпН (1) роЗро░рпБроирпНродрпБ роХро░рпНройро▓рпБроХрпНроХрпБ (0)** рооро╛ро▒ ро╡рпЗрогрпНроЯрпБроорпН.

### API рооро▒рпНро▒рпБроорпН роЪро┐ро╕рпНроЯроорпН роХро╛ро▓рпН (System Call)

роиро╛роорпН роирпЗро░роЯро┐ропро╛роХ роЕро░роЪро╛роЩрпНроХродрпНродрпИ (OS) роЕрогрпБроХро╛рооро▓рпН, роироЯрпБро╡ро┐ро▓рпН роЙро│рпНро│ `Emitras` (API / SCI) роорпВро▓роорпН роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ (OS Service) рокрпЖро▒рпБро╡родрпБ рокрпЛро▓, ропрпВроЪро░рпН рокрпБро░рпЛроХро┐ро░ро╛роорпН OS роЪро░рпНро╡рпАро╕рпНроХро│рпИрокрпН рокрпЖро▒ **API (Application Programmer Interface)** роЕро▓рпНро▓родрпБ **SCI (System Call Interface)**-роР рокропройрпНрокроЯрпБродрпНродрпБроорпН.

### роЪро┐ро╕рпНроЯроорпН роХро╛ро▓рпН роорпВро▓роорпН роорпЛроЯрпН рооро╛ро▒рпБродро▓рпБроХрпНроХро╛рой рокро╛ропрпНроЪрпНроЪро▓рпН (Flow of Mode Shifting via System Call - e.g., `fork`):

ропрпВроЪро░рпН рокрпБро░рпЛроХро┐ро░ро╛рооро┐ро▓рпН `fork` рокрпЛройрпНро▒ роТро░рпБ роЪро┐ро╕рпНроЯроорпН роХро╛ро▓рпН ро╡ро░рпБроорпНрокрпЛродрпБ, роорпЛроЯрпН рооро╛ро▒рпБродро▓рпН рокро┐ройрпНро╡ро░рпБрооро╛ро▒рпБ роироЯроХрпНроХрпБроорпН:

| рокроЯро┐роиро┐ро▓рпИ | роЪрпЖропро▓рпНрокро╛роЯрпБ |
| :--- | :--- | 
| **1. SVC роЙро░рпБро╡ро╛роХрпНроХроорпН** | OS Routine (роО.роХро╛: `fork`) роХроорпНрокрпИро▓рпН роЖроХрпБроорпН рокрпЛродрпБ, роЕродрпБ **SVC (Supervisory Call)** роОройрокрпНрокроЯрпБроорпН роЪро▓рпБроХрпИ рокрпЖро▒рпНро▒ роЗройрпНро╕рпНроЯрпНро░роХрпНтАМро╖ройро╛роХ (Privilege Instruction) рооро╛ро▒рпБроорпН. |
| **2. роЗройрпНроЯро░рокрпНроЯрпН/роЯрпНро░ро╛рокрпН** | ро░ройрпН роЯрпИрооро┐ро▓рпН (Run Time), роЗроирпНрод SVC роТро░рпБ **Software Interrupt** (роЕро▓рпНро▓родрпБ **Trap**)роР роЙро░рпБро╡ро╛роХрпНроХрпБроорпН. роЗройрпНроЯро░рокрпНроЯрпН роОройрпНро▒ро╛ро▓рпН OS-роХрпНроХрпБ роПродро╛ро╡родрпБ роТро░рпБ роЪрпЖропро▓рпНрокро╛роЯрпБ роироЯрокрпНрокродро╛роХродрпН родрпЖро░ро┐ро╡ро┐рокрпНрокродрпБ. |
| **3. ISR ро╡рпЗро▓рпИ** | роЗройрпНроЯро░рокрпНроЯрпН роПро▒рпНрокроЯрпНроЯродрпБроорпН, роЕродро▒рпНроХрпБ роЪрпЗро╡рпИ роЪрпЖропрпНроп **ISR (Interrupt Service Routine)** роЙро░рпБро╡ро╛роХрпБроорпН. |
| **4. роорпЛроЯрпН рокро┐роЯрпН рооро╛ро▒рпБродро▓рпН** | ISR-ройрпН роорпБродро▓рпН ро╡рпЗро▓рпИ: CPU-ро╡ро┐ро▓рпН роЙро│рпНро│ **PSW (Processor Status Word)** ро░рпЖроЬро┐ро╕рпНроЯро░ро┐ро▓рпН роЙро│рпНро│ роорпЛроЯрпН рокро┐роЯрпНроЯрпИ **1 (User)** роЗро▓ро┐ро░рпБроирпНродрпБ **0 (Kernel)** роЖроХ рооро╛ро▒рпНро▒рпБро╡родрпБ. |
| **5. роорпБроХро╡ро░ро┐ роХрогрпНроЯрпБрокро┐роЯро┐рокрпНрокрпБ** | ISR-ройрпН роЗро░рогрпНроЯро╛ро╡родрпБ ро╡рпЗро▓рпИ: **Dispatch Table** роОройрокрпНрокроЯрпБроорпН (RAM-ро▓рпН роЙро│рпНро│) роЯрпЗроЯрпНроЯро╛ ро╕рпНроЯрпНро░роХрпНроЪро░рпБроХрпНроХрпБроЪрпН роЪрпЖройрпНро▒рпБ, родрпЗро╡рпИропро╛рой роЪро┐ро╕рпНроЯроорпН роХро╛ро▓рпН (роО.роХро╛: `fork`) роЗро░рпБроХрпНроХрпБроорпН роорпБроХро╡ро░ро┐ропрпИ (Address) роХрогрпНроЯрпБрокро┐роЯро┐рокрпНрокродрпБ. |
| **6. роиро┐ро▒рпИро╡рпЗро▒рпНро▒рпБродро▓рпН** | роорпБроХро╡ро░ро┐ропрпИрокрпН рокрпЖро▒рпНро▒родрпБроорпН, OS роХро░рпНройро▓рпН рокроХрпБродро┐роХрпНроХрпБро│рпН роЙро│рпНро│ роЕроирпНрод роЗройрпНро╕рпНроЯрпНро░роХрпНтАМро╖ройрпНроХро│рпН ро╡ро░ро┐роЪрпИропро╛роХро╡рпБроорпН, **роЕроЯрпНроЯро╛рооро┐роХрпН** роЖроХро╡рпБроорпН (Atomic execution) роиро┐ро▒рпИро╡рпЗро▒рпНро▒рокрпНрокроЯрпБроорпН. |
| **7. роорпЛроЯрпН родро┐ро░рпБроорпНрокрпБродро▓рпН** | роХроЯрпИроЪро┐ роЗройрпНро╕рпНроЯрпНро░роХрпНтАМро╖ройрпН роорпБроЯро┐роирпНродро╡рпБроЯройрпН, роорпАрогрпНроЯрпБроорпН PSW ро░рпЖроЬро┐ро╕рпНроЯро░рпБроХрпНроХрпБроЪрпН роЪрпЖройрпНро▒рпБ, роорпЛроЯрпН рокро┐роЯрпНроЯрпИ **0 (Kernel)** роЗро▓ро┐ро░рпБроирпНродрпБ **1 (User)** роЖроХ рооро╛ро▒рпНро▒рпБро╡родройрпН роорпВро▓роорпН, ропрпВроЪро░рпН роорпЛроЯрпБроХрпНроХрпБродрпН родро┐ро░рпБроорпНрокрпБроорпН. |

***

### ЁЯЪи роорпБроХрпНроХро┐ропрооро╛рой ро╡ро┐ро╖ропроорпН: роЗройрпНроЯро░рокрпНроЯрпН роОрокрпНрокрпЛродрпБ?

*   роорпЛроЯрпН **ропрпВроЪро░ро┐ро▓рпН роЗро░рпБроирпНродрпБ роХро░рпНройро▓рпБроХрпНроХрпБ** рооро╛ро▒рпБроорпН рокрпЛродрпБ роороЯрпНроЯрпБроорпЗ роЗройрпНроЯро░рокрпНроЯрпН/роЯрпНро░ро╛рокрпН (Interrupt/Trap) родрпЗро╡рпИрокрпНрокроЯрпБроХро┐ро▒родрпБ.
*   роорпЛроЯрпН **роХро░рпНройро▓ро┐ро▓рпН роЗро░рпБроирпНродрпБ ропрпВроЪро░рпБроХрпНроХрпБродрпН** родро┐ро░рпБроорпНрокрпБроорпН рокрпЛродрпБ, роЗройрпНроЯро░рокрпНроЯрпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ. роЕродрпБ ро╡рпЖро▒рпБрооройрпЗ роорпЛроЯрпН рокро┐роЯрпН рооро╛ро▒рпБродро▓рпН роорпВро▓роорпН роироЯроХрпНроХрпБроорпН.