---

### 1. லோக்கல் இன்ஃப்ராஸ்ட்ரக்சர் டெஸ்டிங் (Local Infrastructure Testing)

#### 1.1. லோக்கல் டெவலப்மென்ட்டின் அவசியம் (Why Local Development is Essential)

*   Ansible டூல், ரிமோட் (Remote) சர்வர்கள் அல்லது லோக்கல் (Local) சர்வர்கள் என எதுவுடனும் இணைப்பில் வேலை செய்யும்.
*   ஆனால், Ansible பிளேபுக்குகளை (Playbooks) வேகமாக டெஸ்ட் செய்வதற்கும், டெவலப்மென்ட் செய்வதற்கும் **லோக்கல்லேயே** வேலை செய்வது ரொம்ப நல்ல ஐடியா.
*   லைவ் மெஷின்களில், முக்கியமாக ப்ரொடக்‌ஷன் சூழல்களில், வேலை செய்வதை விட, லோக்கல் டெஸ்டிங் **பாதுகாப்பானது மற்றும் வேகமானது**.
*   இன்ஃப்ராஸ்ட்ரக்சரையும் (Infrastructure) மென்பொருளைப் போலவே **முழுமையாக சோதிக்க வேண்டும்** என்று சிறந்த நடைமுறைகள் (best practices) சொல்கின்றன.
*   ப்ரொடக்‌ஷன் சூழலில் நேரடியாக வேலை செய்வது, மாற்றங்களை ஆவணப்படுத்தாமல் (undocumented) செய்வது, மற்றும் பழைய நிலைக்கு (roll back) திரும்ப வழி இல்லாமல் இருப்பது ஆகியவை மென்பொருள் உலகில் **'Cowboy Coding'** என்று அழைக்கப்படும்.
*   ப்ரொடக்‌ஷனில் அப்ளை செய்வதற்கு முன், ஒரு கான்பிகரேஷன் மாற்றத்தை லோக்கல்ல சோதிப்பது, இந்த 'Cowboy Coding'-ஐ விட **ஆயிரம் மடங்கு சிறந்த அணுகுமுறை**.
*   லோக்கல் விர்ச்சுவல் மெஷினைப் (VM) பயன்படுத்தினால், முக்கியமான சர்வர்களை உடைப்பதைப் பற்றி பயப்படாமல், நீங்கள் ஒரு கான்பிகரேஷன் ஃபைலைத் திருப்பித் திருப்பி tweak செய்து, அதைத் திறம்பட மேம்படுத்தலாம்.
*   சர்வரை மீண்டும் உருவாக்க (rebuild) எந்த டவுன்டைமும் இருக்காது; புது VM-இல் ப்ரொவிஷனிங்கை (Provisioning) மீண்டும் ரன் செய்தால் போதும், சில நிமிடங்களில் வேலை முடிந்துவிடும்.

#### 1.2. தேவையான டூல்கள் (The Necessary Tools)

*   **Vagrant** (சர்வர் ப்ரொவிஷனிங் டூல்) மற்றும் **VirtualBox** (லோக்கல் விர்ச்சுவலைசேஷன் சூழல்) ஆகியவை இன்ஃப்ராஸ்ட்ரக்சரை லோக்கல்ல சோதிக்க ஒரு பலமான காம்பினேஷனாக (potent combination) இருக்கின்றன.
*   இந்த இரண்டு அப்ளிகேஷன்களும் **இலவசமானவை மற்றும் ஓப்பன் சோர்ஸ்** ஆகும். இவை Mac, Linux, அல்லது Windows ஹோஸ்ட்களில் வேலை செய்யும்.

---

### 2. Vagrant மூலம் லோக்கல் சர்வரை அமைத்தல் (Setting Up the Local Server with Vagrant)

#### 2.1. அமைப்பு வழிமுறைகள் (Setup Instructions)

1.  உங்கள் ஆப்பரேட்டிங் சிஸ்டத்திற்கு (OS) ஏற்ற **Vagrant மற்றும் VirtualBox** இரண்டையும் டவுன்லோட் செய்து இன்ஸ்டால் செய்யவும்.
2.  இன்ஸ்டால் செய்யும் போது, Vagrant வேலை செய்ய, **கமாண்ட் லைன் டூல்கள்** நிறுவப்பட்டிருப்பதை VirtualBox-இல் உறுதிப்படுத்திக் கொள்ளவும்.
3.  உங்கள் `Vagrantfile` மற்றும் ப்ரொவிஷனிங் இன்ஸ்ட்ரக்ஷன்ஸை வைப்பதற்காக ஹார்ட் டிரைவில் ஒரு புதிய ஃபோல்டரை உருவாக்கவும்.
4.  டெர்மினல் அல்லது பவர்ஷெல் விண்டோவை ஓப்பன் செய்து, நீங்கள் உருவாக்கிய ஃபோல்டருக்கு செல்லவும்.
5.  `vagrant box add` என்ற கமாண்டைப் பயன்படுத்தி Rocky Linux 8.x 64-bit 'box'-ஐச் சேர்க்கவும்: `vagrant box add geerlingguy/rockylinux8`.
6.  நீங்கள் டவுன்லோட் செய்த box-ஐப் பயன்படுத்தி ஒரு டிஃபால்ட் விர்ச்சுவல் சர்வர் கான்பிகரேஷனை உருவாக்கவும்: `vagrant init geerlingguy/rockylinux8`.
7.  உங்கள் Rocky Linux சர்வரை பூட் செய்யவும்: `vagrant up`.

#### 2.2. விர்ச்சுவல் சர்வர் நிர்வாகம் (Virtual Server Management)

*   `vagrant halt`: VM-ஐ ஷட் டவுன் செய்யும்.
*   `vagrant up`: அதை மீண்டும் மேலே கொண்டு வரும் (bring it back up).
*   `vagrant destroy`: VirtualBox-இல் இருந்து மெஷினை முழுவதுமாக நீக்கிவிடும்.
*   மீண்டும் `vagrant up` செய்தால், அது நீங்கள் முதலில் டவுன்லோட் செய்த அடிப்படை பாக்ஸில் இருந்து சர்வரை மீண்டும் உருவாக்கிவிடும்.
*   **SSH இணைப்பு:** `Vagrantfile` இருக்கும் ஃபோல்டரில் இருந்து `vagrant ssh` என்று டைப் செய்து சர்வர் உடன் இணைக்கலாம்.
*   கைமுறையாக (manually) இணைக்க வேண்டியிருந்தால், தேவையான SSH விவரங்களைப் பெற `vagrant ssh-config` என்ற கமாண்டை பயன்படுத்தலாம்.

#### 2.3. Vagrant-இன் கூடுதல் அம்சங்கள் (Advanced Vagrant Features)

Vagrant பல உபயோகமான அம்சங்களை கொண்டுள்ளது:

*   **நெட்வொர்க் மேனேஜ்மென்ட்:** போர்ட்களை VM-க்கு ஃபார்வர்ட் செய்யலாம் அல்லது பிரைவேட் நெட்வொர்க்கிங்கை (inter-VM மற்றும் host-only கம்யூனிகேஷனுக்காக) பயன்படுத்தலாம்.
*   **ஷேர்டு ஃபோல்டர் மேனேஜ்மென்ட்:** ஹோஸ்ட் மெஷினுக்கும் VM-களுக்கும் இடையே NFS அல்லது VirtualBox-இன் நேட்டிவ் ஃபோல்டர் ஷேரிங் மூலம் ஷேர்களை அமைக்கும்.
*   **மல்டி-மெஷின் மேனேஜ்மென்ட்:** ஒரே `Vagrantfile`-க்குள் பல VM-களை கான்பிகர் செய்யவும் கட்டுப்படுத்தவும் Vagrant-ஆல் முடியும். இது முக்கியம், ஏனெனில் சிக்கலான சூழல்களை ஒரே மெஷினில் சுருக்குவது (flattening), ப்ரொடக்‌ஷன் செட்டப்பின் துல்லியமற்ற மாதிரி.
*   **ப்ரொவிஷனிங் (Provisioning):** `vagrant up` முதல் முறை ரன் ஆகும் போது, அல்லது `vagrant provision` என்று வெளிப்படையாக அழைக்கும்போது, Vagrant ஆனது `Vagrantfile`-இல் கான்பிகர் செய்யப்பட்ட ப்ரொவிஷனரை (provisioner) பயன்படுத்தி புதிய VM-ஐ ஆட்டோமேட்டிக்காக ப்ரொவிஷன் செய்யும்.
    *   Ansible, இந்த ப்ரொவிஷனர்களில் ஒன்றாகும் (மற்றவை ஷெல் ஸ்கிரிப்ட்கள், Chef, Docker, Puppet, Salt போன்றவை).

---

### 3. Vagrant உடன் Ansible-ஐ இணைத்தல் (Integrating Ansible)

Vagrant-இல் உள்ள ப்ரொவிஷனிங் வசதிதான் நமக்கு மிக முக்கியமானது.

#### 3.1. Vagrantfile-இல் Ansible-ஐ கான்பிகர் செய்தல்

*   `Vagrantfile`-இல் இறுதி 'end'-க்கு சற்று முன், பின்வரும் கான்பிகரேஷனை சேர்க்க வேண்டும். இது Ansible-ஐப் பயன்படுத்த ஆரம்பிக்க உதவும் மிக அடிப்படை கான்பிகரேஷன் ஆகும்:

```ruby
# Provisioning configuration for Ansible.
config.vm.provision "ansible" do |ansible|
  ansible.playbook = "playbook.yml"
end
```
*   இது `playbook.yml` என்ற ஃபைலை பயன்படுத்த Ansible-க்கு சொல்கிறது.

#### 3.2. முதல் Ansible Playbook (First Playbook)

*   `Vagrantfile` இருக்கும் அதே ஃபோல்டரில் `playbook.yml` என்ற ஒரு வெற்று டெக்ஸ்ட் ஃபைலை உருவாக்கவும். இது VM-ஐ எப்படி கான்பிகர் செய்ய வேண்டும் என்று Ansible-க்கு சொல்லும் ஒரு சிம்பிள் ஃபைல்.

```yaml
1 ---
2 - hosts: all
3 become: yes
4
5 tasks:
6 - name: Ensure chrony (for time synchronization) is installed.
7 dnf:
8 name: chrony
9 state: present
10
11 - name: Ensure chrony is running.
12 service:
13 name: chronyd
14 state: started
15 enabled: yes
```


*   பிளேபுக்கை இயக்க: `vagrant provision`.
*   Ansible, நீங்கள் வரையறுத்த `tasks`-க்கான ஸ்டேட்டஸ் மெசேஜ்களை ரன் செய்து முடித்தவுடன், என்னென்ன மாற்றங்கள் செய்யப்பட்டன என்று ஒரு சுருக்கத்தைக் (recap) காட்டும்.

#### 3.3. Playbook-இன் முக்கிய அம்சங்கள் (Key Playbook Elements)

| அம்சங்கள் | விளக்கம் | ஆதாரம் |
| :--- | :--- | :--- |
| **`---`** | மீதமுள்ள ஆவணம் YAML (YAML Syntax) ஃபார்மட்டில் இருக்கும் என்பதற்கான மார்க்கர். | |
| **`- hosts: all`** | இந்த பிளேபுக் எந்த ஹோஸ்ட்களுக்குப் பொருந்தும் என்பதை இது சொல்கிறது. Vagrant, அதன் சொந்த Inventory File-ஐப் பயன்படுத்துவதால், இங்கே `all` வேலை செய்கிறது. | |
| **`become: yes`** | `chrony` போன்ற சிஸ்டம் கான்பிகரேஷன்களை மாற்ற, சலுகை பெற்ற அணுகல் (privileged access) தேவை. இந்த வரி, பிளேபுக்கில் உள்ள அனைத்து பணிகளுக்கும் **`sudo`** (ரூட் யூசராக மாற) பயன்படுத்தச் சொல்கிறது. | |
| **`tasks:`** | இந்த வரிக்குப் பிறகு வரும் அனைத்துப் பணிகளும் அனைத்து ஹோஸ்ட்களிலும் (இந்த ஒரு VM-இல்) இயக்கப்படும். | |
| **`dnf` Task** | இது `dnf install chrony` கமாண்டுக்கு சமம். ஆனால், இது chrony இன்ஸ்டால் செய்யப்பட்டுள்ளதா என்று **சோதிக்கும்**. இன்ஸ்டால் செய்யப்படவில்லை என்றால் மட்டுமே இன்ஸ்டால் செய்யும். இது சாதாரண ஷெல் ஸ்கிரிப்டை விட அதிக புத்திசாலித்தனமானது மற்றும் பலமானது (robust). | |
| **`service` Task** | இது `chronyd` சர்வீஸ் **இயங்குகிறது** (running) என்பதை உறுதி செய்வதோடு, அது சிஸ்டம் பூட் ஆகும் போது **செயல்படுத்தப்படுவதையும்** (enabled) உறுதி செய்கிறது. | |

**Ansible vs. ஷெல் ஸ்கிரிப்ட்கள்:**
*   சாதாரண ஷெல் ஸ்கிரிப்ட்களில், ஒரு சர்வீஸ் இயங்கிக் கொண்டிருக்கிறதா என்று சோதித்து, இல்லையென்றால் ஸ்டார்ட் செய்வது மற்றும் சிஸ்டம் ஸ்டார்ட்அப்பில் அதை இயக்க வைப்பது போன்ற வேலைகள் **மிகவும் சிக்கலானதாக மாறும்**.
*   Ansible-ஐப் பயன்படுத்தும் போது, ​​**Idempotency** (பல முறை ரன் செய்தாலும் ஒரே நிலையை உறுதி செய்வது) மற்றும் பிழை நிலைமைகளைக் கையாள்வது போன்ற விஷயங்களுக்கு, நீங்கள் சாதாரண ஷெல் ஸ்கிரிப்ட்களை விட **குறைந்த வேலையே** செய்ய வேண்டியிருக்கும்.